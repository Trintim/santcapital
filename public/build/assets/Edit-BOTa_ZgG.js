import{u as x,j as e,H as f,L as g,t as m}from"./app-DQPXqyy6.js";import{B as c}from"./button-D5vWEiac.js";import{C as p,a as h,b as j,c as v}from"./card-CTZBBi1H.js";import{C as u}from"./checkbox-Bpfk0InQ.js";import{I as n}from"./input-DyStY0q5.js";import{L as d}from"./label-CV-IQmcC.js";import{T as y}from"./textarea-BiAyifo4.js";import{A as N}from"./app-layout-BbIYuyIF.js";/* empty css            */import"./createLucideIcon-DTltB1YP.js";import"./utils-BkIxhzDH.js";import"./index-BTFQTnP1.js";import"./index-Dc_FVRD7.js";import"./index-DNtamNmN.js";import"./index-B9BnfCey.js";import"./index-D3GA1IrA.js";import"./check-1cbie2Cp.js";import"./index-DCU4N4gc.js";import"./index-BXjLavUZ.js";import"./index-CdpUR5B_.js";import"./dropdown-menu-BGF5fV-q.js";function J({plan:i}){const{data:r,setData:s,put:l,processing:o,errors:t}=x({name:i.data.name??"",description:i.data.description??"",lockup_days:i.data.lockup_days??0,minimum_deposit_amount:i.data.minimum_deposit_amount??0,contract_term_months:i.data.contract_term_months,expected_return_min_decimal:i.data.expected_return_min_decimal??"",expected_return_max_decimal:i.data.expected_return_max_decimal??"",extra_bonus_percent_on_capital_decimal:i.data.extra_bonus_percent_on_capital_decimal??"",withdrawal_only_at_maturity:!!i.data.withdrawal_only_at_maturity,guaranteed_min_multiplier_after_24m:i.data.guaranteed_min_multiplier_after_24m??"",is_active:!!i.data.is_active});function _(a){a.preventDefault(),l(route("admin.plans.update",{plan:i.data.id}),{onSuccess:()=>{m.success("Plano atualizado com sucesso!")},onError:()=>{m.error("Erro ao atualizar o plano.")}})}return e.jsx(N,{children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx(f,{title:`Editar: ${i.data.name}`}),e.jsxs(p,{className:"mx-auto max-w-4xl",children:[e.jsx(h,{children:e.jsx(j,{className:"text-2xl",children:"Editar plano"})}),e.jsx(v,{children:e.jsxs("form",{onSubmit:_,className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"Nome"}),e.jsx(n,{id:"name",value:r.name,onChange:a=>s("name",a.target.value)}),t.name&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"lockup_days",children:"Carência padrão (dias)"}),e.jsx(n,{id:"lockup_days",type:"number",value:r.lockup_days,onChange:a=>s("lockup_days",Number(a.target.value))}),t.lockup_days&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.lockup_days})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"minimum_deposit_amount",children:"Aporte mínimo (R$)"}),e.jsx(n,{id:"minimum_deposit_amount",type:"number",step:"0.01",value:r.minimum_deposit_amount,onChange:a=>s("minimum_deposit_amount",a.target.value)}),t.minimum_deposit_amount&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.minimum_deposit_amount})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"contract_term_months",children:"Prazo (meses)"}),e.jsx(n,{id:"contract_term_months",type:"number",value:r.contract_term_months??"",onChange:a=>s("contract_term_months",a.target.value?Number(a.target.value):null)}),t.contract_term_months&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.contract_term_months})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"description",children:"Descrição"}),e.jsx(y,{id:"description",rows:4,value:r.description,onChange:a=>s("description",a.target.value)}),t.description&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.description})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"expected_return_min_decimal",children:"Rendimento esperado (mín., decimal)"}),e.jsx(n,{id:"expected_return_min_decimal",value:r.expected_return_min_decimal,onChange:a=>s("expected_return_min_decimal",a.target.value)}),t.expected_return_min_decimal&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.expected_return_min_decimal})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"expected_return_max_decimal",children:"Rendimento esperado (máx., decimal)"}),e.jsx(n,{id:"expected_return_max_decimal",value:r.expected_return_max_decimal,onChange:a=>s("expected_return_max_decimal",a.target.value)}),t.expected_return_max_decimal&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.expected_return_max_decimal})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"extra_bonus_percent_on_capital_decimal",children:"Bônus sobre capital (decimal)"}),e.jsx(n,{id:"extra_bonus_percent_on_capital_decimal",value:r.extra_bonus_percent_on_capital_decimal,onChange:a=>s("extra_bonus_percent_on_capital_decimal",a.target.value)}),t.extra_bonus_percent_on_capital_decimal&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.extra_bonus_percent_on_capital_decimal})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"withdrawal_only_at_maturity",checked:r.withdrawal_only_at_maturity,onCheckedChange:a=>s("withdrawal_only_at_maturity",!!a)}),e.jsx(d,{htmlFor:"withdrawal_only_at_maturity",children:"Saque somente no vencimento"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"guaranteed_min_multiplier_after_24m",children:"Garantia mínima (após 24m)"}),e.jsx(n,{id:"guaranteed_min_multiplier_after_24m",value:r.guaranteed_min_multiplier_after_24m,onChange:a=>s("guaranteed_min_multiplier_after_24m",a.target.value)}),t.guaranteed_min_multiplier_after_24m&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.guaranteed_min_multiplier_after_24m})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"is_active",checked:r.is_active,onCheckedChange:a=>s("is_active",!!a)}),e.jsx(d,{htmlFor:"is_active",children:"Plano ativo"})]}),e.jsxs("div",{className:"flex gap-2 md:col-span-2",children:[e.jsx(g,{href:route("admin.plans.index"),children:e.jsx(c,{variant:"outline",children:"Voltar"})}),e.jsx(c,{disabled:o,children:"Salvar alterações"})]})]})})]}),e.jsx(k,{plan:i})]})})}function k({plan:i}){const{data:r,setData:s,post:l,processing:o,errors:t}=x({lockup_days:"",is_default:!1}),_=a=>{a.preventDefault(),l(route("admin.plans.lockups.store",{plan:i.data.id}),{preserveScroll:!0,onSuccess:()=>{m.success("Opção de carência adicionada com sucesso!")},onError:()=>{m.error("Erro ao adicionar a opção de carência.")}})};return e.jsxs(p,{className:"mx-auto mt-6 max-w-4xl",children:[e.jsx(h,{children:e.jsx(j,{children:"Opções de carência"})}),e.jsxs(v,{className:"space-y-3",children:[e.jsx("ul",{className:"divide-y rounded border",children:i.data.lockup_options?.length>0?i.data.lockup_options.map(a=>e.jsxs("li",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{children:[a.lockup_days," dias"," ",a.is_default&&e.jsx("span",{className:"ml-2 rounded bg-muted px-2 py-0.5 text-xs",children:"padrão"})||""]}),e.jsx(c,{variant:"destructive",size:"sm",onClick:()=>{confirm("Tem certeza que deseja remover esta opção de carência?")&&(window.location.href=route("admin.plans.lockups.destroy",{plan:i.data.id,option:a.id}))},children:"Remover"})]},a.id)):e.jsx("li",{className:"p-3 text-sm text-muted-foreground",children:"Sem opções adicionais."})}),e.jsxs("form",{onSubmit:_,className:"flex flex-col gap-4 md:flex-row md:items-end md:gap-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"lockup_days_new",children:"Nova carência (dias)"}),e.jsx(n,{id:"lockup_days_new",type:"number",value:r.lockup_days,onChange:a=>s("lockup_days",a.target.value)}),t.lockup_days&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.lockup_days})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(u,{id:"is_default_new",checked:r.is_default,onCheckedChange:a=>s("is_default",!!a)}),e.jsx(d,{htmlFor:"is_default_new",children:"Definir como padrão"})]})]}),e.jsx(c,{disabled:o,type:"submit",children:"Adicionar"})]})]})]})}export{J as default};
