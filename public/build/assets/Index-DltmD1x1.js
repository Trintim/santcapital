import{u as R,r as l,j as e,H as k,L as j,a as S,t as f}from"./app-CWQYjesW.js";import{P as F}from"./Index-FgTW9mE0.js";import{A as z,a as B,b as L,c as H,e as I,f as E,g as O}from"./alert-dialog-DhUswqu4.js";import{B as $}from"./badge-C9TpCT63.js";import{B as p}from"./button-Dif-jUvB.js";import{C as q,a as M,b as W,d as G,c as J}from"./card-C5BbfPUs.js";import{I as K}from"./input-oxdypoZS.js";import{T as Q,a as U,b as g,c as s,d as V,e as r}from"./table-Dv4XCUC3.js";import{A as X,T as C,a as v,b}from"./app-layout-CaRbv66n.js";import{T as n}from"./index-CnTLoYi9.js";import{S as Z}from"./search-BB8Bx_e1.js";import{c as Y}from"./createLucideIcon-DYlXr946.js";import{T as ee}from"./trash-2-DJEg84CC.js";/* empty css            */import"./select-D88Byryw.js";import"./index-Dc_FVRD7.js";import"./index-HsrAfS9P.js";import"./index-DensfDaT.js";import"./index-BQ3Tdzwx.js";import"./index-p0rgwcIB.js";import"./index-xVn67iIP.js";import"./utils-BkIxhzDH.js";import"./check-BkTEbtPm.js";import"./dropdown-menu-B2Cjc48K.js";import"./index-CykbKIKJ.js";import"./index-BMonI4iZ.js";import"./proxy-BQoEUct6.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],se=Y("Pen",ae);function Re({customYields:t,filters:i}){const{data:o,setData:h}=R({search:i?.search||"","per-page":i?.["per-page"]||15,"sort-by":i?.["sort-by"]||"period",direction:i?.direction||"desc"}),[T,y]=l.useState(o["per-page"]),[D,c]=l.useState(!1),[d,A]=l.useState(null),x=l.useRef(null),u=t.data.length>0;console.log(t);const w=a=>{y(a),h(m=>({...m,"per-page":a})),window.location.href=n("admin.weekly-yields.index",{...o,"per-page":a})},N=a=>{h(m=>({...m,search:a.target.value})),window.location.href=n("admin.weekly-yields.index",{...o,search:a.target.value})},_=a=>{A({id:a.id,label:`${a.customer_plan?.customer?.name??a.customer_plan_id} — ${a.period}`}),requestAnimationFrame(()=>c(!0))},P=()=>{d&&S.delete(n("admin.weekly-yields.delete",{id:d.id}),{preserveState:!0,onSuccess:()=>f.success("Rendimento removido com sucesso."),onError:()=>f.error("Erro ao remover rendimento. Tente novamente."),onFinish:()=>c(!1)})};return e.jsxs(X,{children:[e.jsx(k,{title:"Rendimentos Semanais"}),e.jsxs(q,{className:"bg-accent",children:[e.jsxs(M,{children:[e.jsx(W,{children:"Lista de rendimentos semanais"}),e.jsx(G,{children:"Rendimentos aplicados manualmente para clientes em seus planos, por semana."})]}),e.jsxs(J,{children:[" ",e.jsxs("div",{className:"mb-4 flex items-center justify-between gap-2",children:[e.jsx(K,{leftIcon:e.jsx(Z,{className:"size-4"}),name:"search",placeholder:"Buscar cliente...",id:"search",value:o.search,onChange:N,className:"w-full sm:max-w-sm"}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(j,{href:n("admin.weekly-yields.create"),children:[" ",e.jsx(p,{children:"Cadastrar rendimento"})," "]})})]}),u?e.jsxs(Q,{children:[e.jsx(U,{children:e.jsxs(g,{children:[e.jsx(s,{children:"Cliente"}),e.jsx(s,{children:"Plano"}),e.jsx(s,{children:"Período"}),e.jsx(s,{children:"Percentual"}),e.jsx(s,{children:"Ações"})]})}),e.jsx(V,{children:t.data.map(a=>e.jsxs(g,{children:[e.jsx(r,{children:a.customer_plan?.customer?.name??a.customer_plan_id}),e.jsx(r,{children:a.customer_plan?.plan?.name??"-"}),e.jsx(r,{children:a.period}),e.jsx(r,{children:e.jsxs($,{variant:parseFloat(a.percent_decimal)>=0?"default":"destructive",children:[parseFloat(a.percent_decimal).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2}),"%"]})}),e.jsxs(r,{children:[e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsx(j,{href:n("admin.weekly-yields.edit",{id:a.id}),children:e.jsx(p,{variant:"outline",size:"icon",className:"mr-1",children:e.jsx(se,{className:"size-4"})})})}),e.jsx(b,{children:"Editar"})]}),e.jsxs(C,{children:[e.jsx(v,{asChild:!0,children:e.jsx(p,{variant:"destructive",size:"icon",onClick:()=>_(a),children:e.jsx(ee,{className:"size-4"})})}),e.jsx(b,{children:"Remover"})]})]})]},a.id))})]}):e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"Nenhum rendimento personalizado cadastrado."}),u&&e.jsx(F,{meta:t.meta,perPage:T,setPerPage:w})]})]}),e.jsx(z,{open:D,onOpenChange:c,children:e.jsxs(B,{onOpenAutoFocus:a=>{a.preventDefault(),x.current?.focus()},children:[e.jsx(L,{children:e.jsx(H,{children:"Remover rendimento?"})}),e.jsx("div",{className:"mb-2",children:d?.label}),e.jsxs(I,{children:[e.jsx(E,{ref:x,children:"Cancelar"}),e.jsx(O,{className:"bg-red-600 hover:bg-red-700",onClick:P,children:"Remover"})]})]})})]})}export{Re as default};
