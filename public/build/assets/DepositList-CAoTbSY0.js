import{u as C,j as e,a as n,t as i}from"./app-CWQYjesW.js";import{P as B}from"./Index-FgTW9mE0.js";import{B as P}from"./badge-C9TpCT63.js";import{B as j}from"./button-Dif-jUvB.js";import{D as T,a as E,b as A,c as R,e as M,d as x}from"./dropdown-menu-B2Cjc48K.js";import{I as _}from"./input-oxdypoZS.js";import{T as k,a as F,b as u,c as a,d as I,e as r}from"./table-Dv4XCUC3.js";import{u as L,a as z,P as H}from"./useSort-DzkHFzZC.js";import{f as g}from"./index-9YGKT2P1.js";import{T as t}from"./index-CnTLoYi9.js";import{S as q}from"./search-BB8Bx_e1.js";import{E as O}from"./ellipsis-CWAs5Cu-.js";import{C as Q}from"./circle-check-DpHx_YCC.js";import{C as V}from"./circle-x-B4aYzdh1.js";import{T as X}from"./trash-2-DJEg84CC.js";/* empty css            */import"./select-D88Byryw.js";import"./index-Dc_FVRD7.js";import"./index-HsrAfS9P.js";import"./index-DensfDaT.js";import"./createLucideIcon-DYlXr946.js";import"./index-BQ3Tdzwx.js";import"./index-p0rgwcIB.js";import"./index-xVn67iIP.js";import"./utils-BkIxhzDH.js";import"./check-BkTEbtPm.js";import"./index-CykbKIKJ.js";import"./proxy-BQoEUct6.js";function ve({pagination:p,filters:c}){const{data:l,setData:h}=C({search:c.search||"","per-page":typeof c["per-page"]=="number"?c["per-page"]:15}),{handleDebounceFilter:f}=L({path:t("admin.deposits.index"),initialData:l,onDataChange:h}),{handleSort:N,getSortDirection:d}=z({sortBy:c["sort-by"]||"id",sortDirection:c.direction||"asc"}),v=s=>{const o={...l,"per-page":s};h(o),n.get(t("admin.deposits.index"),g(o),{preserveState:!0,preserveScroll:!0})},m=s=>{const o=N(s),y={...l,...o};n.get(t("admin.deposits.index"),g(y),{preserveState:!0,preserveScroll:!0})};function b(s){n.post(t("admin.deposits.approve",{transaction:s}),{},{onSuccess:()=>{i.success("Aporte aprovado com sucesso.")},onError:()=>{i.error("Erro ao aprovar o aporte.")}})}function D(s){n.post(t("admin.deposits.reject",{transaction:s}),{},{onSuccess:()=>{i.success("Aporte rejeitado com sucesso.")},onError:()=>{i.error("Erro ao rejeitar o aporte.")}})}function w(s){n.delete(t("admin.deposits.destroy",{transaction:s}),{onSuccess:()=>{i.success("Aporte excluído com sucesso.")},onError:()=>{i.error("Erro ao excluir o aporte.")}})}const S=p.data.length>0;return e.jsxs("div",{className:"rounded-xl bg-accent px-3 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-lg font-bold",children:"Aportes"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{leftIcon:e.jsx(q,{className:"size-4"}),name:"search",placeholder:"Buscar por nome, email, telefone ou documento",id:"search",value:l.search,onChange:f,className:"w-full sm:max-w-sm"}),e.jsxs(j,{type:"button",size:"sm",className:"cursor-pointer",onClick:()=>n.visit(t("admin.deposits.create")),children:[e.jsx("span",{className:"text-xs",children:"Novo aporte"}),e.jsx(H,{className:"size-4"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs(k,{children:[e.jsx(F,{children:e.jsxs(u,{children:[e.jsx(a,{sortable:!0,sortBy:"id",sortDirection:d("id"),onSort:m,children:"ID"}),e.jsx(a,{children:"Cliente"}),e.jsx(a,{children:"Plano"}),e.jsx(a,{sortable:!0,sortBy:"amount",sortDirection:d("amount"),onSort:m,children:"Valor"}),e.jsx(a,{sortable:!0,sortBy:"effective_date",sortDirection:d("effective_date"),onSort:m,children:"Data"}),e.jsx(a,{sortable:!0,sortBy:"status",sortDirection:d("status"),onSort:m,children:"Status"}),e.jsx(a,{children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx(I,{children:S?p.data.map((s,o)=>e.jsxs(u,{className:"hover:!bg-secondary/10",children:[e.jsx(r,{children:o+1}),e.jsx(r,{className:"max-w-32 truncate",children:e.jsxs("div",{className:"flex flex-col",children:[s.customer_plan?.customer?.name,e.jsxs("span",{className:"text-xs text-muted-foreground",children:[" (",s.customer_plan?.customer?.email,")"]})]})}),e.jsx(r,{className:"max-w-36 truncate",children:s.customer_plan?.plan?.name}),e.jsxs(r,{className:"max-w-36 truncate",children:["R$ ",Number(s.amount).toLocaleString("pt-BR",{minimumFractionDigits:2})]}),e.jsx(r,{children:new Date(s.effective_date).toLocaleDateString("pt-BR",{day:"2-digit",month:"2-digit",year:"numeric"})}),e.jsx(r,{children:e.jsx(P,{className:s.status==="approved"?"bg-emerald-600 hover:bg-emerald-600":s.status==="rejected"?"bg-red-600 hover:bg-red-600":"bg-yellow-500 hover:bg-yellow-500",children:s.status==="approved"?"Aprovado":s.status==="rejected"?"Rejeitado":"Pendente"})}),e.jsx(r,{className:"text-right",children:e.jsxs(T,{children:[e.jsx(E,{asChild:!0,children:e.jsxs(j,{variant:"ghost",className:"h-8 w-8 p-0",children:[e.jsx("span",{className:"sr-only",children:"Abrir menu"}),e.jsx(O,{className:"h-4 w-4"})]})}),e.jsxs(A,{align:"end",children:[e.jsx(R,{children:"Ações"}),e.jsx(M,{}),s.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(x,{onClick:()=>b(s.id),children:[e.jsx(Q,{className:"mr-2 h-4 w-4 text-emerald-600"}),"Aprovar"]}),e.jsxs(x,{onClick:()=>D(s.id),children:[e.jsx(V,{className:"mr-2 h-4 w-4 text-red-600"}),"Rejeitar"]})]}),e.jsxs(x,{onClick:()=>w(s.id),className:"text-red-600",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),"Excluir"]})]})]})})]},String(s.id))):e.jsx(u,{children:e.jsx(r,{colSpan:7,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhum aporte encontrado."})})})]})})}),e.jsx(B,{meta:p?.meta,perPage:Number(l["per-page"]),setPerPage:v})]})}export{ve as DepositList};
