import{r as b,j as e,H as T,a as n,t as l}from"./app-DQPXqyy6.js";import{T as c}from"./index-CnTLoYi9.js";import{A as k,a as w,b as B,c as F,d as P,e as L,f as H,g as O}from"./alert-dialog-DeYUn2X1.js";import{B as a}from"./badge-DqPQ3dnD.js";import{B as o}from"./button-D5vWEiac.js";import{C as m,a as x,b as h,c as j}from"./card-CTZBBi1H.js";import{T as C,a as D,b as d,c as r,d as y,e as i}from"./table-CEcLtHF-.js";import{A as z}from"./app-layout-BbIYuyIF.js";import{c as E}from"./createLucideIcon-DTltB1YP.js";import{P as I}from"./pencil-CUaSYHcZ.js";import{C as $}from"./circle-x-lTnNvq6l.js";import{C as V}from"./circle-check-DfwlcfWJ.js";import{T as q}from"./trash-2-CJ2-wwRz.js";/* empty css            */import"./index-BTFQTnP1.js";import"./index-DCU4N4gc.js";import"./index-BXjLavUZ.js";import"./index-D3GA1IrA.js";import"./utils-BkIxhzDH.js";import"./proxy-hqGVL8UZ.js";import"./input-DyStY0q5.js";import"./index-Dc_FVRD7.js";import"./index-CdpUR5B_.js";import"./index-B9BnfCey.js";import"./dropdown-menu-BGF5fV-q.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],G=E("ArrowLeft",M);function ve({plan:t,metrics:u,recentActivity:f}){const[A,p]=b.useState(!1),N=b.useRef(null),v=s=>typeof s=="number"?`R$ ${s.toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"—",g=s=>typeof s=="number"?`${(s*100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}%`:"—",_=()=>n.visit(c("admin.plans.index")),S=()=>{t?.id&&n.patch(c("admin.plans.toggle-active",{plan:t.id}),{},{preserveScroll:!0,onSuccess:()=>l.success("Status do plano alterado."),onError:()=>l.error("Falha ao alterar status.")})},R=()=>{n.delete(c("admin.plans.destroy",{plan:t.id}),{preserveScroll:!0,onSuccess:()=>{l.success("Plano removido."),_()},onError:()=>l.error("Falha ao remover plano."),onFinish:()=>p(!1)})};return e.jsxs(z,{children:[e.jsx(T,{title:`Plano • ${t.name}`}),e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:_,children:[e.jsx(G,{className:"mr-2 h-4 w-4"}),"Voltar"]}),e.jsxs("div",{className:"ml-auto inline-flex gap-2",children:[e.jsxs(o,{variant:"outline",size:"sm",onClick:()=>n.visit(c("admin.plans.edit",{plan:t.id})),children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),"Editar"]}),e.jsx(o,{variant:"outline",size:"sm",onClick:S,children:t.is_active?e.jsxs(e.Fragment,{children:[e.jsx($,{className:"mr-2 h-4 w-4 text-red-600"}),"Desativar"]}):e.jsxs(e.Fragment,{children:[e.jsx(V,{className:"mr-2 h-4 w-4 text-emerald-600"}),"Ativar"]})}),e.jsxs(o,{variant:"destructive",size:"sm",onClick:()=>p(!0),children:[e.jsx(q,{className:"mr-2 h-4 w-4"}),"Remover"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(m,{className:"md:col-span-2",children:[e.jsx(x,{children:e.jsxs(h,{className:"flex items-center gap-2",children:[t.name," ",t.is_active?e.jsx(a,{children:"Ativo"}):e.jsx(a,{variant:"destructive",children:"Inativo"})]})}),e.jsxs(j,{className:"space-y-4",children:[t.description?e.jsx("p",{className:"text-sm text-muted-foreground",children:t.description}):null,e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Carência padrão"}),e.jsxs("div",{className:"text-base font-medium",children:[t.lockup_days??0," dias"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Aporte mínimo"}),e.jsx("div",{className:"text-base font-medium",children:v(t.minimum_deposit_amount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prazo (meses)"}),e.jsx("div",{className:"text-base font-medium",children:t.contract_term_months??"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rendimento esperado (mín)"}),e.jsx("div",{className:"text-base font-medium",children:g(t.expected_return_min_decimal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rendimento esperado (máx)"}),e.jsx("div",{className:"text-base font-medium",children:g(t.expected_return_max_decimal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bônus (% sobre capital)"}),e.jsx("div",{className:"text-base font-medium",children:g(t.extra_bonus_percent_on_capital_decimal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Saque só no vencimento?"}),e.jsx("div",{className:"text-base font-medium",children:t.withdrawal_only_at_maturity?"Sim":"Não"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Garantia mínima (24m)"}),e.jsx("div",{className:"text-base font-medium",children:typeof t.guaranteed_min_multiplier_after_24m=="number"?`${t.guaranteed_min_multiplier_after_24m}x`:"—"})]})]})]})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Métricas do plano"})}),e.jsxs(j,{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Vínculos ativos"}),e.jsx("div",{className:"text-2xl font-semibold",children:u.activeCount})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Vínculos totais"}),e.jsx("div",{className:"text-2xl font-semibold",children:u.totalCount})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total investido (aprovado)"}),e.jsx("div",{className:"text-2xl font-semibold",children:v(u.totalInvested)})]})]})]})]}),e.jsxs("div",{className:"mt-6 grid gap-4 lg:grid-cols-2",children:[e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Opções de carência"})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-lg border",children:e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(d,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Dias"}),e.jsx(r,{children:"Padrão"}),e.jsx(r,{className:"text-right",children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx(y,{children:t.lockupOptions?.length?t.lockupOptions.map(s=>e.jsxs(d,{className:"hover:!bg-secondary/10",children:[e.jsx(i,{children:s.id}),e.jsx(i,{children:s.lockup_days}),e.jsx(i,{children:s.is_default?e.jsx(a,{children:"Sim"}):e.jsx("span",{className:"text-muted-foreground",children:"Não"})}),e.jsx(i,{className:"text-right",children:e.jsx("span",{className:"text-muted-foreground",children:"—"})})]},s.id)):e.jsx(d,{children:e.jsx(i,{colSpan:4,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhuma opção cadastrada."})})})]})})})]}),e.jsxs(m,{children:[e.jsx(x,{children:e.jsx(h,{children:"Atividades recentes"})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-lg border",children:e.jsxs(C,{children:[e.jsx(D,{children:e.jsxs(d,{children:[e.jsx(r,{children:"ID"}),e.jsx(r,{children:"Cliente"}),e.jsx(r,{children:"Tipo"}),e.jsx(r,{children:"Status"}),e.jsx(r,{className:"text-right",children:"Valor"}),e.jsx(r,{children:"Data"})]})}),e.jsx(y,{children:f?.length?f.map(s=>e.jsxs(d,{className:"hover:!bg-secondary/10",children:[e.jsx(i,{children:s.id}),e.jsx(i,{className:"max-w-48 truncate",children:s.customer_name??"—"}),e.jsx(i,{children:s.type==="deposit"?e.jsx(a,{children:"Depósito"}):s.type==="yield"?e.jsx(a,{variant:"secondary",children:"Rendimento"}):e.jsx(a,{variant:"destructive",children:"Saque"})}),e.jsx(i,{children:s.status==="approved"?e.jsx(a,{children:"Aprovado"}):s.status==="pending"?e.jsx(a,{variant:"secondary",children:"Pendente"}):e.jsx(a,{variant:"destructive",children:"Rejeitado"})}),e.jsx(i,{className:"text-right",children:v(s.amount)}),e.jsx(i,{children:new Date(s.effective_date).toLocaleDateString("pt-BR")})]},s.id)):e.jsx(d,{children:e.jsx(i,{colSpan:6,className:"h-24 text-center text-sm text-muted-foreground",children:"Sem movimentações recentes."})})})]})})})]})]}),e.jsx(k,{open:A,onOpenChange:p,children:e.jsxs(w,{onOpenAutoFocus:s=>{s.preventDefault(),N.current?.focus()},children:[e.jsxs(B,{children:[e.jsx(F,{children:"Remover plano?"}),e.jsx(P,{children:"Esta ação não poderá ser desfeita. Todos os vínculos existentes permanecerão, mas o plano deixará de existir para novos cadastros."})]}),e.jsxs(L,{children:[e.jsx(H,{ref:N,children:"Cancelar"}),e.jsx(O,{className:"bg-red-600 hover:bg-red-700",onClick:R,children:"Remover"})]})]})})]})}export{ve as default};
