import{u as f,r as h,j as e,H as j,L as v,t as n}from"./app-DQPXqyy6.js";import{C as _}from"./combobox-DyPyolnf.js";import{B as m}from"./button-D5vWEiac.js";import{C,a as g,b,c as N}from"./card-CTZBBi1H.js";import{I as c}from"./input-DyStY0q5.js";import{L as o}from"./label-CV-IQmcC.js";import{A as S}from"./app-layout-BbIYuyIF.js";/* empty css            */import"./popover-BS0p4FZO.js";import"./createLucideIcon-DTltB1YP.js";import"./index-DCU4N4gc.js";import"./index-BTFQTnP1.js";import"./index-BXjLavUZ.js";import"./index-D3GA1IrA.js";import"./utils-BkIxhzDH.js";import"./search-CdWRY7Gz.js";import"./index-CdpUR5B_.js";import"./index-Dc_FVRD7.js";import"./check-1cbie2Cp.js";import"./index-B9BnfCey.js";import"./dropdown-menu-BGF5fV-q.js";function J({customerPlans:i}){const d=typeof window>"u"?"":new URLSearchParams(window.location.search).get("cp")??"",{data:r,setData:s,post:l,processing:p,errors:a}=f({customer_plan_id:d,amount:"",effective_date:""}),u=h.useMemo(()=>i.map(t=>({value:String(t.id),label:`${t.customer?.name} — ${t.plan?.name}${t.status==="pre_active"?" (pré-ativo)":""}`})),[i]);function x(t){t.preventDefault(),l(route("admin.deposits.store"),{onSuccess:()=>{n.success("Aporte criado com sucesso.")},onError:()=>{n.error("Erro ao criar aporte. Verifique os campos.")}})}return e.jsxs(S,{children:[e.jsx(j,{title:"Novo Aporte"}),e.jsxs(C,{children:[e.jsx(g,{children:e.jsx(b,{className:"text-2xl",children:"Novo aporte"})}),e.jsx(N,{children:e.jsxs("form",{onSubmit:x,className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(o,{children:"Cliente — Plano"}),e.jsx(_,{value:String(r.customer_plan_id||""),onChange:t=>s("customer_plan_id",t),items:u,placeholder:"Selecione o vínculo…",searchPlaceholder:"Buscar cliente/plano…"}),a.customer_plan_id&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.customer_plan_id})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"amount",children:"Valor (R$)"}),e.jsx(c,{id:"amount",type:"number",step:"0.01",value:r.amount,onChange:t=>s("amount",t.target.value)}),a.amount&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.amount})]}),e.jsxs("div",{children:[e.jsx(o,{htmlFor:"effective_date",children:"Data (opcional)"}),e.jsx(c,{id:"effective_date",type:"date",value:r.effective_date,onChange:t=>s("effective_date",t.target.value)}),a.effective_date&&e.jsx("p",{className:"mt-1 text-sm text-red-500",children:a.effective_date})]}),e.jsxs("div",{className:"flex gap-2 md:col-span-2",children:[e.jsx(v,{href:route("admin.deposits.index"),children:e.jsx(m,{variant:"outline",children:"Cancelar"})}),e.jsx(m,{type:"submit",disabled:p,children:"Salvar"})]})]})})]})]})}export{J as default};
