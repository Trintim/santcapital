import{u as k,r as c,j as e,a as i,t as u}from"./app-D1QTuDhJ.js";import{P as H}from"./Index-CLJJewea.js";import{A as _,a as q,b as J,c as Q,d as X,e as G,f as K,g as U}from"./alert-dialog-BXiRyJmV.js";import{B as V}from"./badge-DYhrUWVS.js";import{B as S}from"./button-CjsFrxyq.js";import{D as W,a as Y,b as Z,c as $,d as j,e as ee}from"./dropdown-menu-CRqzibls.js";import{I as se}from"./input-CHa5w17A.js";import{T as re,a as ae,b as f,c as o,d as te,e as a}from"./table-BPMAg_xM.js";import{u as oe,a as ne,P as ie}from"./useSort-CUqZp01l.js";import{f as y}from"./index-9YGKT2P1.js";import{T as n}from"./index-CnTLoYi9.js";import{S as le}from"./search-CTwqVz6b.js";import{C}from"./circle-check-sNWNR50x.js";import{C as w}from"./circle-x-BnzRXOLC.js";import{E as ce}from"./ellipsis-B7kO5F0b.js";import{P as me}from"./pencil-DHq2D9jr.js";import{T as de}from"./trash-2-CST2hwSM.js";/* empty css            */import"./select-0yqIVW6-.js";import"./index-Dc_FVRD7.js";import"./index-B9yUo-Ai.js";import"./index-DwBoTTRC.js";import"./createLucideIcon-DFi8gACE.js";import"./index-DvlxdSxl.js";import"./index-DGw6JHWd.js";import"./index-CWTwyLLH.js";import"./utils-BkIxhzDH.js";import"./check-tbf6p6GB.js";import"./index-2tsdWD63.js";import"./index-CzgvQrgu.js";import"./proxy-BH5ppGYh.js";function Je({pagination:x,filters:m}){const{data:l,setData:g}=k({search:m.search||"","per-page":m["per-page"]||15}),{handleDebounceFilter:A}=oe({path:n("admin.employees.index"),initialData:l,onDataChange:g}),{handleSort:E,getSortDirection:v}=ne({sortBy:m["sort-by"]||"name",sortDirection:m.direction||"asc"}),F=s=>{const r={...l,"per-page":s};g(r),i.get(n("admin.employees.index"),y(r),{preserveState:!0,preserveScroll:!0})},N=s=>{const r=E(s),p={...l,...r};i.get(n("admin.employees.index"),y(p),{preserveState:!0,preserveScroll:!0})},P=x.data.length>0,[T,d]=c.useState(null),[B,h]=c.useState(!1),[b,I]=c.useState(null),[O,M]=c.useState(""),D=c.useRef(null),R=(s,r)=>{d(null),document.activeElement?.blur?.(),requestAnimationFrame(()=>{I(s),M(r),h(!0)})},z=()=>{b&&i.delete(n("admin.employees.destroy",{employee:b}),{preserveState:!0,preserveScroll:!0,onSuccess:()=>{u.success("Funcionário excluído com sucesso.")},onError:()=>{u.error("Erro ao excluir funcionário.")},onFinish:()=>h(!1)})},L=s=>{d(null),document.activeElement?.blur?.(),i.post(n("admin.employees.toggle-active",{employee:s}),{},{preserveState:!0,preserveScroll:!0,onSuccess:()=>{u.success("Status do funcionário alterado com sucesso.")},onError:()=>{u.error("Erro ao alterar status do funcionário.")}})};return e.jsxs("div",{className:"rounded-xl bg-accent px-3 pt-4",children:[e.jsxs("div",{className:"flex flex-col items-start justify-between gap-4 sm:flex-row sm:items-center",children:[e.jsx("h1",{className:"text-lg font-bold",children:"Funcionários"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(se,{leftIcon:e.jsx(le,{className:"size-4"}),name:"search",placeholder:"Buscar funcionários...",id:"search",value:l.search,onChange:A,className:"w-full sm:max-w-sm"}),e.jsxs(S,{type:"button",size:"sm",onClick:()=>i.visit(n("admin.employees.create")),children:[e.jsx("span",{className:"text-xs",children:"Novo Funcionário"}),e.jsx(ie,{className:"size-4"})]})]})]}),e.jsx("div",{className:"mt-4",children:e.jsx("div",{className:"overflow-hidden",children:e.jsxs(re,{children:[e.jsx(ae,{children:e.jsxs(f,{children:[e.jsx(o,{children:"ID"}),e.jsx(o,{sortable:!0,sortBy:"name",sortDirection:v("name"),onSort:N,children:"Nome"}),e.jsx(o,{sortable:!0,sortBy:"email",sortDirection:v("email"),onSort:N,children:"Email"}),e.jsx(o,{children:"Telefone"}),e.jsx(o,{children:"CPF/CNPJ"}),e.jsx(o,{children:"Status"}),e.jsx(o,{children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx(te,{children:P?x.data.map((s,r)=>{const p=T===s.id;return e.jsxs(f,{className:"hover:!bg-secondary/10",children:[e.jsx(a,{children:r+1}),e.jsx(a,{className:"max-w-32 truncate",children:s.name}),e.jsx(a,{className:"max-w-36 truncate",children:s.email}),e.jsx(a,{children:s.phone??"—"}),e.jsx(a,{children:s.document??"—"}),e.jsx(a,{className:"whitespace-nowrap",children:e.jsx(V,{variant:"default",className:s.is_active?"bg-emerald-600 hover:bg-emerald-600":"bg-red-600 hover:bg-red-600",children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"size-4"}),"Ativo"]}):e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"size-4"}),"Inativo"]})})}),e.jsx(a,{className:"text-right",children:e.jsxs(W,{open:p,onOpenChange:t=>d(t?s.id:null),children:[e.jsx(Y,{asChild:!0,children:e.jsx(S,{variant:"ghost",className:"h-8 w-8 p-0","aria-label":"Abrir menu",children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsxs(Z,{align:"end",children:[e.jsx($,{children:"Ações"}),e.jsxs(j,{onSelect:t=>{t.preventDefault(),d(null),i.visit(n("admin.employees.edit",{employee:s.id}))},children:[e.jsx(me,{className:"mr-2 h-4 w-4"}),"Editar"]}),e.jsx(j,{onSelect:t=>{t.preventDefault(),L(s.id)},children:s.is_active?e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"mr-2 h-4 w-4 text-red-600"}),"Desativar"]}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"mr-2 h-4 w-4 text-emerald-600"}),"Ativar"]})}),e.jsx(ee,{}),e.jsxs(j,{className:"text-red-600 focus:text-red-600",onSelect:t=>{t.preventDefault(),R(s.id,s.name)},children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Remover"]})]})]})})]},String(s.id))}):e.jsx(f,{children:e.jsx(a,{colSpan:7,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhum funcionário encontrado."})})})]})})}),e.jsx(H,{meta:x?.meta,perPage:l["per-page"],setPerPage:F}),e.jsx(_,{open:B,onOpenChange:h,children:e.jsxs(q,{onOpenAutoFocus:s=>{s.preventDefault(),D.current?.focus()},children:[e.jsxs(J,{children:[e.jsx(Q,{children:"Confirmar exclusão"}),e.jsxs(X,{children:["Esta ação removerá o funcionário ",e.jsx("strong",{children:O}),"."]})]}),e.jsxs(G,{children:[e.jsx(K,{ref:D,children:"Cancelar"}),e.jsx(U,{className:"bg-red-600 hover:bg-red-700",onClick:z,children:"Remover"})]})]})})]})}export{Je as EmployeeList};
