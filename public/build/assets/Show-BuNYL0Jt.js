import{r as o,j as e,H as G,a as l,t as n}from"./app-CWQYjesW.js";import{T as c}from"./index-CnTLoYi9.js";import{A,a as S,b as T,c as R,d as w,e as F,f as L,g as B}from"./alert-dialog-DhUswqu4.js";import{B as a}from"./badge-C9TpCT63.js";import{B as m}from"./button-Dif-jUvB.js";import{C as x,a as h,b as u,c as j}from"./card-C5BbfPUs.js";import{T as O,a as P,b as d,c as i,d as E,e as t}from"./table-Dv4XCUC3.js";import{A as X,T as J,a as K,b as Q}from"./app-layout-CaRbv66n.js";import{c as U}from"./createLucideIcon-DYlXr946.js";import{P as W}from"./pencil-CHV3VhhD.js";import{C as Y}from"./circle-x-B4aYzdh1.js";import{C as Z}from"./circle-check-DpHx_YCC.js";import{T as z}from"./trash-2-DJEg84CC.js";/* empty css            */import"./index-DensfDaT.js";import"./index-BMonI4iZ.js";import"./index-HsrAfS9P.js";import"./index-BQ3Tdzwx.js";import"./utils-BkIxhzDH.js";import"./proxy-BQoEUct6.js";import"./input-oxdypoZS.js";import"./index-Dc_FVRD7.js";import"./index-p0rgwcIB.js";import"./index-CykbKIKJ.js";import"./dropdown-menu-B2Cjc48K.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],se=U("ArrowLeft",ee);function Ae({plan:r,metrics:p,recentActivity:_}){const[H,v]=o.useState(!1),b=o.useRef(null),[I,f]=o.useState(!1),[C,D]=o.useState(null),y=o.useRef(null),g=s=>typeof s=="number"||typeof s=="string"?`R$ ${Number(s).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}`:"—",N=s=>s!=null?`${(Number(s)*100).toLocaleString("pt-BR",{minimumFractionDigits:2,maximumFractionDigits:2})}%`:"—",k=()=>l.visit(c("admin.plans.index")),$=()=>{r?.id&&l.patch(c("admin.plans.toggle-active",{plan:r.id}),{},{preserveScroll:!0,onSuccess:()=>n.success("Status do plano alterado."),onError:()=>n.error("Falha ao alterar status.")})},V=()=>{l.delete(c("admin.plans.destroy",{plan:r.id}),{preserveScroll:!0,onSuccess:()=>{n.success("Plano removido."),k()},onError:()=>n.error("Falha ao remover plano."),onFinish:()=>v(!1)})};function q(s){D(s),f(!0)}function M(){C&&l.delete(c("admin.plans.lockups.destroy",{plan:r.id,option:C.id}),{preserveScroll:!0,onSuccess:()=>n.success("Opção removida."),onError:()=>n.error("Falha ao remover opção."),onFinish:()=>{f(!1),D(null)}})}return e.jsxs(X,{children:[e.jsx(G,{title:`Plano • ${r.name}`}),e.jsxs("div",{className:"mb-3 flex items-center gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:k,children:[e.jsx(se,{className:"mr-2 h-4 w-4"}),"Voltar"]}),e.jsxs("div",{className:"ml-auto inline-flex gap-2",children:[e.jsxs(m,{variant:"outline",size:"sm",onClick:()=>l.visit(c("admin.plans.edit",{plan:r.id})),children:[e.jsx(W,{className:"mr-2 h-4 w-4"}),"Editar"]}),e.jsx(m,{variant:"outline",size:"sm",onClick:$,children:r.is_active?e.jsxs(e.Fragment,{children:[e.jsx(Y,{className:"mr-2 h-4 w-4 text-red-600"}),"Desativar"]}):e.jsxs(e.Fragment,{children:[e.jsx(Z,{className:"mr-2 h-4 w-4 text-emerald-600"}),"Ativar"]})}),e.jsxs(m,{variant:"destructive",size:"sm",onClick:()=>v(!0),children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),"Remover"]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(x,{className:"md:col-span-2",children:[e.jsx(h,{children:e.jsxs(u,{className:"flex items-center gap-2",children:[r.name," ",r.is_active?e.jsx(a,{children:"Ativo"}):e.jsx(a,{variant:"destructive",children:"Inativo"})]})}),e.jsxs(j,{className:"space-y-4",children:[r.description?e.jsx("p",{className:"text-sm text-muted-foreground",children:r.description}):null,e.jsxs("div",{className:"grid gap-3 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Carência padrão"}),e.jsxs("div",{className:"text-base font-medium",children:[r.lockup_days??0," dias"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Aporte mínimo"}),e.jsx("div",{className:"text-base font-medium",children:g(r.minimum_deposit_amount)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Prazo (meses)"}),e.jsx("div",{className:"text-base font-medium",children:r.contract_term_months??"—"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rendimento esperado (mín)"}),e.jsx("div",{className:"text-base font-medium",children:N(r.expected_return_min_decimal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Rendimento esperado (máx)"}),e.jsx("div",{className:"text-base font-medium",children:N(r.expected_return_max_decimal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Bônus (% sobre capital)"}),e.jsx("div",{className:"text-base font-medium",children:N(r.extra_bonus_percent_on_capital_decimal)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Saque só no vencimento?"}),e.jsx("div",{className:"text-base font-medium",children:r.withdrawal_only_at_maturity?"Sim":"Não"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Garantia mínima (24m)"}),e.jsx("div",{className:"text-base font-medium",children:typeof r.guaranteed_min_multiplier_after_24m=="number"||typeof r.guaranteed_min_multiplier_after_24m=="string"?`${r.guaranteed_min_multiplier_after_24m}x`:"—"})]})]})]})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Métricas do plano"})}),e.jsxs(j,{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Vínculos ativos"}),e.jsx("div",{className:"text-2xl font-semibold",children:p.activeCount})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Vínculos totais"}),e.jsx("div",{className:"text-2xl font-semibold",children:p.totalCount})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Total investido (aprovado)"}),e.jsx("div",{className:"text-2xl font-semibold",children:g(p.totalInvested)})]})]})]})]}),e.jsxs("div",{className:"mt-6 grid gap-4 lg:grid-cols-2",children:[e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Opções de carência"})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-lg border",children:e.jsxs(O,{children:[e.jsx(P,{children:e.jsxs(d,{children:[e.jsx(i,{children:"ID"}),e.jsx(i,{children:"Dias"}),e.jsx(i,{children:"Padrão"}),e.jsx(i,{className:"text-right",children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx(E,{children:r.lockup_options?.data.length?r.lockup_options.data.map(s=>e.jsxs(d,{className:"hover:!bg-secondary/10",children:[e.jsx(t,{children:s.id}),e.jsx(t,{children:s.lockup_days}),e.jsx(t,{children:s.is_default?e.jsx(a,{children:"Sim"}):e.jsx("span",{className:"text-muted-foreground",children:"Não"})}),e.jsx(t,{className:"text-right",children:e.jsxs(J,{children:[e.jsx(K,{asChild:!0,children:e.jsx(m,{variant:"destructive",size:"icon",onClick:()=>q(s),children:e.jsx(z,{className:"h-4 w-4"})})}),e.jsx(Q,{children:"Remover opção"})]})})]},s.id)):e.jsx(d,{children:e.jsx(t,{colSpan:4,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhuma opção cadastrada."})})})]})})})]}),e.jsxs(x,{children:[e.jsx(h,{children:e.jsx(u,{children:"Atividades recentes"})}),e.jsx(j,{children:e.jsx("div",{className:"rounded-lg border",children:e.jsxs(O,{children:[e.jsx(P,{children:e.jsxs(d,{children:[e.jsx(i,{children:"ID"}),e.jsx(i,{children:"Cliente"}),e.jsx(i,{children:"Tipo"}),e.jsx(i,{children:"Status"}),e.jsx(i,{className:"text-right",children:"Valor"}),e.jsx(i,{children:"Data"})]})}),e.jsx(E,{children:_?.length?_.map(s=>e.jsxs(d,{className:"hover:!bg-secondary/10",children:[e.jsx(t,{children:s.id}),e.jsx(t,{className:"max-w-48 truncate",children:s.customer_name??"—"}),e.jsx(t,{children:s.type==="deposit"?e.jsx(a,{children:"Depósito"}):s.type==="yield"?e.jsx(a,{variant:"secondary",children:"Rendimento"}):e.jsx(a,{variant:"destructive",children:"Saque"})}),e.jsx(t,{children:s.status==="approved"?e.jsx(a,{children:"Aprovado"}):s.status==="pending"?e.jsx(a,{variant:"secondary",children:"Pendente"}):e.jsx(a,{variant:"destructive",children:"Rejeitado"})}),e.jsx(t,{className:"text-right",children:g(s.amount)}),e.jsx(t,{children:new Date(s.effective_date).toLocaleDateString("pt-BR")})]},s.id)):e.jsx(d,{children:e.jsx(t,{colSpan:6,className:"h-24 text-center text-sm text-muted-foreground",children:"Sem movimentações recentes."})})})]})})})]})]}),e.jsx(A,{open:H,onOpenChange:v,children:e.jsxs(S,{onOpenAutoFocus:s=>{s.preventDefault(),b.current?.focus()},children:[e.jsxs(T,{children:[e.jsx(R,{children:"Remover plano?"}),e.jsx(w,{children:"Esta ação não poderá ser desfeita. Todos os vínculos existentes permanecerão, mas o plano deixará de existir para novos cadastros."})]}),e.jsxs(F,{children:[e.jsx(L,{ref:b,children:"Cancelar"}),e.jsx(B,{className:"bg-red-600 hover:bg-red-700",onClick:V,children:"Remover"})]})]})}),e.jsx(A,{open:I,onOpenChange:f,children:e.jsxs(S,{onOpenAutoFocus:s=>{s.preventDefault(),y.current?.focus()},children:[e.jsxs(T,{children:[e.jsx(R,{children:"Remover opção de carência?"}),e.jsx(w,{children:"Esta ação não poderá ser desfeita. A opção será removida do plano."})]}),e.jsxs(F,{children:[e.jsx(L,{ref:y,children:"Cancelar"}),e.jsx(B,{className:"bg-red-600 hover:bg-red-700",onClick:M,children:"Remover"})]})]})})]})}export{Ae as default};
