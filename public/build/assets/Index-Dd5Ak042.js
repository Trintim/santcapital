import{u as P,r as S,j as e,H as F,a as H}from"./app-BTymDE-b.js";import{P as y}from"./Index-BJE5hFwe.js";import{B as s}from"./badge-FDCXrNx6.js";import{B as E}from"./button-0cFyQk5l.js";import{C as x,a as m,b as p,c as h}from"./card-DgBBEt0T.js";import{T as j,a as u,b as n,c as t,d as g,e as r}from"./table-DufyZNTU.js";import{A as L}from"./app-layout-Ctney_0w.js";import q from"./WithdrawDialog-BjruDLUJ.js";import{f as O}from"./index-9YGKT2P1.js";import{T as k}from"./index-CnTLoYi9.js";/* empty css            */import"./select-CXekZFRK.js";import"./index-Dc_FVRD7.js";import"./index-C9ZXAN1u.js";import"./index-CcDKZjMs.js";import"./createLucideIcon-CdDXl1n5.js";import"./index-C1SMWg6O.js";import"./index-DOyuSIH3.js";import"./index-BjsA19nC.js";import"./utils-BkIxhzDH.js";import"./check-CpxbXbUo.js";import"./dropdown-menu-8hpJ0En7.js";import"./index-85cLjII4.js";import"./proxy-BMoTdZYb.js";import"./input-CeqObPA2.js";import"./index-B3n4jYYB.js";import"./alert-dialog-DiBo0ReV.js";import"./label-C_xWgJU0.js";const _=i=>`R$ ${Number(i??0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`,v=i=>i?new Date(i).toLocaleDateString("pt-BR"):"—";function he({plans:i,deposits:d,statement:l,filters:f}){const c=P({dep_per_page:Number(f.dep_per_page||10)}),o=P({tx_per_page:Number(f.tx_per_page||10)}),b=a=>{H.get(k("customer.deposits.index"),O(a),{preserveState:!0,preserveScroll:!0})},w=a=>{c.setData("dep_per_page",a),b({dep_per_page:a,tx_per_page:o.data.tx_per_page,tx_page:l.meta.current_page})},D=a=>{o.setData("tx_per_page",a),b({tx_per_page:a,dep_per_page:c.data.dep_per_page,dep_page:d.meta.current_page})},[T,N]=S.useState(!1),[C,A]=S.useState(null),B=a=>{A({id:a.id,plan_name:a.plan_name,available:a.available}),document.activeElement?.blur?.(),requestAnimationFrame(()=>N(!0))},R=a=>a==="approved"?e.jsx(s,{variant:"default",children:"Aprovado"}):a==="pending"?e.jsx(s,{variant:"secondary",children:"Pendente"}):e.jsx(s,{variant:"destructive",children:"Rejeitado"});return e.jsxs(L,{children:[e.jsx(F,{title:"Meus aportes"}),e.jsxs(x,{className:"mb-6",children:[e.jsx(m,{children:e.jsx(p,{children:"Meus planos"})}),e.jsx(h,{children:e.jsx("div",{className:"overflow-hidden rounded-lg border bg-card",children:e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(n,{children:[e.jsx(t,{children:"Plano"}),e.jsx(t,{children:"Status"}),e.jsx(t,{children:"Ativado em"}),e.jsx(t,{children:"Carência (dias)"}),e.jsx(t,{className:"text-right",children:"Saldo disponível"}),e.jsx(t,{children:e.jsx("span",{className:"sr-only",children:"Ações"})})]})}),e.jsx(g,{children:i.length?i.map(a=>e.jsxs(n,{children:[e.jsx(r,{children:a.plan_name??"—"}),e.jsx(r,{children:a.status==="active"?e.jsx(s,{variant:"default",children:"Ativo"}):a.status==="pre_active"?e.jsx(s,{variant:"secondary",children:"Pré-ativo"}):e.jsx(s,{variant:"destructive",children:"Inativo"})}),e.jsx(r,{children:v(a.activated_on)}),e.jsx(r,{children:a.lockup_days??"—"}),e.jsx(r,{className:"text-right",children:_(a.available)}),e.jsx(r,{className:"text-right",children:e.jsx(E,{size:"sm",disabled:!a.withdraw_eligible||a.available<=0,onClick:()=>B(a),children:"Solicitar saque"})})]},a.id)):e.jsx(n,{children:e.jsx(r,{colSpan:6,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhum plano encontrado."})})})]})})})]}),e.jsxs(x,{className:"mb-6",children:[e.jsx(m,{className:"flex flex-row items-center justify-between",children:e.jsx(p,{children:"Aportes"})}),e.jsxs(h,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border bg-card",children:e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(n,{children:[e.jsx(t,{children:"Data"}),e.jsx(t,{children:"Plano"}),e.jsx(t,{children:"Status"}),e.jsx(t,{className:"text-right",children:"Valor"})]})}),e.jsx(g,{children:d.data.length?d.data.map(a=>e.jsxs(n,{children:[e.jsx(r,{children:v(a.effective_date)}),e.jsx(r,{children:a.customer_plan?.plan?.name??"—"}),e.jsx(r,{children:R(a.status)}),e.jsx(r,{className:"text-right",children:_(a.amount)})]},a.id)):e.jsx(n,{children:e.jsx(r,{colSpan:4,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhum aporte encontrado."})})})]})}),e.jsx("div",{className:"mt-3",children:e.jsx(y,{meta:d.meta,perPage:c.data.dep_per_page,setPerPage:w})})]})]}),e.jsxs(x,{children:[e.jsx(m,{className:"flex flex-row items-center justify-between",children:e.jsx(p,{children:"Extrato"})}),e.jsxs(h,{children:[e.jsx("div",{className:"overflow-hidden rounded-lg border bg-card",children:e.jsxs(j,{children:[e.jsx(u,{children:e.jsxs(n,{children:[e.jsx(t,{children:"Data"}),e.jsx(t,{children:"Plano"}),e.jsx(t,{children:"Tipo"}),e.jsx(t,{className:"text-right",children:"Valor"})]})}),e.jsx(g,{children:l.data.length?l.data.map(a=>e.jsxs(n,{children:[e.jsx(r,{children:v(a.effective_date)}),e.jsx(r,{children:a.customer_plan?.plan?.name??"—"}),e.jsx(r,{children:a.type==="deposit"?e.jsx(s,{variant:"default",children:"Aporte"}):a.type==="yield"?e.jsx(s,{variant:"secondary",children:"Rendimento"}):e.jsx(s,{variant:"destructive",children:"Saque"})}),e.jsx(r,{className:"text-right",children:_(a.amount)})]},a.id)):e.jsx(n,{children:e.jsx(r,{colSpan:4,className:"h-24 text-center text-sm text-muted-foreground",children:"Nenhum lançamento encontrado."})})})]})}),e.jsx("div",{className:"mt-3",children:e.jsx(y,{meta:l.meta,perPage:o.data.tx_per_page,setPerPage:D})})]})]}),e.jsx(q,{open:T,onOpenChange:N,plan:C})]})}export{he as default};
