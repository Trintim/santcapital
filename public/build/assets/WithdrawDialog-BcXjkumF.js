import{r as c,j as t,a as _e,t as K}from"./app-DQPXqyy6.js";import{T as Re}from"./index-CnTLoYi9.js";import{A as we,a as ye,b as je,c as Ie,d as Ne,e as Ce,f as Ee,g as Ae}from"./alert-dialog-DeYUn2X1.js";import{I}from"./input-DyStY0q5.js";import{L as R}from"./label-CV-IQmcC.js";import{c as Fe,u as E}from"./createLucideIcon-DTltB1YP.js";import{c as G,u as q,a as V,b as Se}from"./index-BTFQTnP1.js";import{P as C}from"./index-D3GA1IrA.js";import{c as ke,u as Pe,a as W,b as Te}from"./index-BXjLavUZ.js";import{u as De}from"./index-DNtamNmN.js";import{c as $}from"./utils-BkIxhzDH.js";/* empty css            */import"./index-DCU4N4gc.js";import"./button-D5vWEiac.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Oe=Fe("Circle",Me);function w(e,n,{checkForDefaultPrevented:r=!0}={}){return function(o){if(e?.(o),r===!1||!o.defaultPrevented)return n?.(o)}}var D="rovingFocusGroup.onEntryFocus",Ge={bubbles:!1,cancelable:!0},A="RovingFocusGroup",[M,H,Le]=ke(A),[Ue,Y]=G(A,[Le]),[Be,Ke]=Ue(A),z=c.forwardRef((e,n)=>t.jsx(M.Provider,{scope:e.__scopeRovingFocusGroup,children:t.jsx(M.Slot,{scope:e.__scopeRovingFocusGroup,children:t.jsx(Ve,{...e,ref:n})})}));z.displayName=A;var Ve=c.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,orientation:a,loop:o=!1,dir:u,currentTabStopId:p,defaultCurrentTabStopId:i,onCurrentTabStopIdChange:s,onEntryFocus:d,preventScrollOnEntryFocus:l=!1,...v}=e,h=c.useRef(null),m=E(n,h),g=W(u),[b,f]=q({prop:p,defaultProp:i??null,onChange:s,caller:A}),[y,k]=c.useState(!1),_=Te(d),j=H(r),P=c.useRef(!1),[ve,U]=c.useState(0);return c.useEffect(()=>{const x=h.current;if(x)return x.addEventListener(D,_),()=>x.removeEventListener(D,_)},[_]),t.jsx(Be,{scope:r,orientation:a,dir:g,loop:o,currentTabStopId:b,onItemFocus:c.useCallback(x=>f(x),[f]),onItemShiftTab:c.useCallback(()=>k(!0),[]),onFocusableItemAdd:c.useCallback(()=>U(x=>x+1),[]),onFocusableItemRemove:c.useCallback(()=>U(x=>x-1),[]),children:t.jsx(C.div,{tabIndex:y||ve===0?-1:0,"data-orientation":a,...v,ref:m,style:{outline:"none",...e.style},onMouseDown:w(e.onMouseDown,()=>{P.current=!0}),onFocus:w(e.onFocus,x=>{const he=!P.current;if(x.target===x.currentTarget&&he&&!y){const B=new CustomEvent(D,Ge);if(x.currentTarget.dispatchEvent(B),!B.defaultPrevented){const T=j().filter(N=>N.focusable),ge=T.find(N=>N.active),be=T.find(N=>N.id===b),xe=[ge,be,...T].filter(Boolean).map(N=>N.ref.current);Q(xe,l)}}P.current=!1}),onBlur:w(e.onBlur,()=>k(!1))})})}),X="RovingFocusGroupItem",J=c.forwardRef((e,n)=>{const{__scopeRovingFocusGroup:r,focusable:a=!0,active:o=!1,tabStopId:u,children:p,...i}=e,s=Pe(),d=u||s,l=Ke(X,r),v=l.currentTabStopId===d,h=H(r),{onFocusableItemAdd:m,onFocusableItemRemove:g,currentTabStopId:b}=l;return c.useEffect(()=>{if(a)return m(),()=>g()},[a,m,g]),t.jsx(M.ItemSlot,{scope:r,id:d,focusable:a,active:o,children:t.jsx(C.span,{tabIndex:v?0:-1,"data-orientation":l.orientation,...i,ref:n,onMouseDown:w(e.onMouseDown,f=>{a?l.onItemFocus(d):f.preventDefault()}),onFocus:w(e.onFocus,()=>l.onItemFocus(d)),onKeyDown:w(e.onKeyDown,f=>{if(f.key==="Tab"&&f.shiftKey){l.onItemShiftTab();return}if(f.target!==f.currentTarget)return;const y=$e(f,l.orientation,l.dir);if(y!==void 0){if(f.metaKey||f.ctrlKey||f.altKey||f.shiftKey)return;f.preventDefault();let _=h().filter(j=>j.focusable).map(j=>j.ref.current);if(y==="last")_.reverse();else if(y==="prev"||y==="next"){y==="prev"&&_.reverse();const j=_.indexOf(f.currentTarget);_=l.loop?He(_,j+1):_.slice(j+1)}setTimeout(()=>Q(_))}}),children:typeof p=="function"?p({isCurrentTabStop:v,hasTabStop:b!=null}):p})})});J.displayName=X;var qe={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function We(e,n){return n!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function $e(e,n,r){const a=We(e.key,r);if(!(n==="vertical"&&["ArrowLeft","ArrowRight"].includes(a))&&!(n==="horizontal"&&["ArrowUp","ArrowDown"].includes(a)))return qe[a]}function Q(e,n=!1){const r=document.activeElement;for(const a of e)if(a===r||(a.focus({preventScroll:n}),document.activeElement!==r))return}function He(e,n){return e.map((r,a)=>e[(n+a)%e.length])}var Ye=z,ze=J;function Xe(e,n){return c.useReducer((r,a)=>n[r][a]??r,e)}var Z=e=>{const{present:n,children:r}=e,a=Je(n),o=typeof r=="function"?r({present:a.isPresent}):c.Children.only(r),u=E(a.ref,Qe(o));return typeof r=="function"||a.isPresent?c.cloneElement(o,{ref:u}):null};Z.displayName="Presence";function Je(e){const[n,r]=c.useState(),a=c.useRef(null),o=c.useRef(e),u=c.useRef("none"),p=e?"mounted":"unmounted",[i,s]=Xe(p,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return c.useEffect(()=>{const d=F(a.current);u.current=i==="mounted"?d:"none"},[i]),V(()=>{const d=a.current,l=o.current;if(l!==e){const h=u.current,m=F(d);e?s("MOUNT"):m==="none"||d?.display==="none"?s("UNMOUNT"):s(l&&h!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,s]),V(()=>{if(n){let d;const l=n.ownerDocument.defaultView??window,v=m=>{const b=F(a.current).includes(CSS.escape(m.animationName));if(m.target===n&&b&&(s("ANIMATION_END"),!o.current)){const f=n.style.animationFillMode;n.style.animationFillMode="forwards",d=l.setTimeout(()=>{n.style.animationFillMode==="forwards"&&(n.style.animationFillMode=f)})}},h=m=>{m.target===n&&(u.current=F(a.current))};return n.addEventListener("animationstart",h),n.addEventListener("animationcancel",v),n.addEventListener("animationend",v),()=>{l.clearTimeout(d),n.removeEventListener("animationstart",h),n.removeEventListener("animationcancel",v),n.removeEventListener("animationend",v)}}else s("ANIMATION_END")},[n,s]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:c.useCallback(d=>{a.current=d?getComputedStyle(d):null,r(d)},[])}}function F(e){return e?.animationName||"none"}function Qe(e){let n=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning;return r?e.ref:(n=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=n&&"isReactWarning"in n&&n.isReactWarning,r?e.props.ref:e.props.ref||e.ref)}var L="Radio",[Ze,ee]=G(L),[et,tt]=Ze(L),te=c.forwardRef((e,n)=>{const{__scopeRadio:r,name:a,checked:o=!1,required:u,disabled:p,value:i="on",onCheck:s,form:d,...l}=e,[v,h]=c.useState(null),m=E(n,f=>h(f)),g=c.useRef(!1),b=v?d||!!v.closest("form"):!0;return t.jsxs(et,{scope:r,checked:o,disabled:p,children:[t.jsx(C.button,{type:"button",role:"radio","aria-checked":o,"data-state":ae(o),"data-disabled":p?"":void 0,disabled:p,value:i,...l,ref:m,onClick:w(e.onClick,f=>{o||s?.(),b&&(g.current=f.isPropagationStopped(),g.current||f.stopPropagation())})}),b&&t.jsx(re,{control:v,bubbles:!g.current,name:a,value:i,checked:o,required:u,disabled:p,form:d,style:{transform:"translateX(-100%)"}})]})});te.displayName=L;var oe="RadioIndicator",ne=c.forwardRef((e,n)=>{const{__scopeRadio:r,forceMount:a,...o}=e,u=tt(oe,r);return t.jsx(Z,{present:a||u.checked,children:t.jsx(C.span,{"data-state":ae(u.checked),"data-disabled":u.disabled?"":void 0,...o,ref:n})})});ne.displayName=oe;var ot="RadioBubbleInput",re=c.forwardRef(({__scopeRadio:e,control:n,checked:r,bubbles:a=!0,...o},u)=>{const p=c.useRef(null),i=E(p,u),s=De(r),d=Se(n);return c.useEffect(()=>{const l=p.current;if(!l)return;const v=window.HTMLInputElement.prototype,m=Object.getOwnPropertyDescriptor(v,"checked").set;if(s!==r&&m){const g=new Event("click",{bubbles:a});m.call(l,r),l.dispatchEvent(g)}},[s,r,a]),t.jsx(C.input,{type:"radio","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:i,style:{...o.style,...d,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});re.displayName=ot;function ae(e){return e?"checked":"unchecked"}var nt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],S="RadioGroup",[rt,It]=G(S,[Y,ee]),se=Y(),ie=ee(),[at,st]=rt(S),ce=c.forwardRef((e,n)=>{const{__scopeRadioGroup:r,name:a,defaultValue:o,value:u,required:p=!1,disabled:i=!1,orientation:s,dir:d,loop:l=!0,onValueChange:v,...h}=e,m=se(r),g=W(d),[b,f]=q({prop:u,defaultProp:o??null,onChange:v,caller:S});return t.jsx(at,{scope:r,name:a,required:p,disabled:i,value:b,onValueChange:f,children:t.jsx(Ye,{asChild:!0,...m,orientation:s,dir:g,loop:l,children:t.jsx(C.div,{role:"radiogroup","aria-required":p,"aria-orientation":s,"data-disabled":i?"":void 0,dir:g,...h,ref:n})})})});ce.displayName=S;var ue="RadioGroupItem",de=c.forwardRef((e,n)=>{const{__scopeRadioGroup:r,disabled:a,...o}=e,u=st(ue,r),p=u.disabled||a,i=se(r),s=ie(r),d=c.useRef(null),l=E(n,d),v=u.value===o.value,h=c.useRef(!1);return c.useEffect(()=>{const m=b=>{nt.includes(b.key)&&(h.current=!0)},g=()=>h.current=!1;return document.addEventListener("keydown",m),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",m),document.removeEventListener("keyup",g)}},[]),t.jsx(ze,{asChild:!0,...i,focusable:!p,active:v,children:t.jsx(te,{disabled:p,required:u.required,checked:v,...s,...o,name:u.name,ref:l,onCheck:()=>u.onValueChange(o.value),onKeyDown:w(m=>{m.key==="Enter"&&m.preventDefault()}),onFocus:w(o.onFocus,()=>{h.current&&d.current?.click()})})})});de.displayName=ue;var it="RadioGroupIndicator",le=c.forwardRef((e,n)=>{const{__scopeRadioGroup:r,...a}=e,o=ie(r);return t.jsx(ne,{...o,...a,ref:n})});le.displayName=it;var me=ce,fe=de,ct=le;const pe=c.forwardRef(({className:e,...n},r)=>t.jsx(me,{className:$("grid gap-2",e),...n,ref:r}));pe.displayName=me.displayName;const O=c.forwardRef(({className:e,...n},r)=>t.jsx(fe,{ref:r,className:$("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),...n,children:t.jsx(ct,{className:"flex items-center justify-center",children:t.jsx(Oe,{className:"h-2.5 w-2.5 fill-current text-current"})})}));O.displayName=fe.displayName;const ut=e=>`R$ ${Number(e??0).toLocaleString("pt-BR",{minimumFractionDigits:2})}`;function Nt({open:e,onOpenChange:n,plan:r}){const a=c.useRef(null),[o,u]=c.useState({customer_plan_id:r?String(r.id):"",amount:"",method:"pix",pix_key:"",bank_name:"",bank_code:"",agency_number:"",account_number:"",holder_name:"",holder_cpf_cnpj:""});c.useEffect(()=>{u(i=>({...i,customer_plan_id:r?String(r.id):"",amount:"",method:"pix",pix_key:"",bank_name:"",bank_code:"",agency_number:"",account_number:"",holder_name:"",holder_cpf_cnpj:""}))},[r?.id]);const p=i=>{i.preventDefault(),_e.post(Re("customer.withdrawals.store"),{customer_plan_id:Number(o.customer_plan_id),amount:Number(String(o.amount).replace(/\./g,"").replace(",",".")),method:o.method,pix_key:o.method==="pix"?o.pix_key:void 0,bank_name:o.method==="ted"?o.bank_name:void 0,bank_code:o.method==="ted"?o.bank_code:void 0,agency_number:o.method==="ted"?o.agency_number:void 0,account_number:o.method==="ted"?o.account_number:void 0,holder_name:o.method==="ted"?o.holder_name:void 0,holder_cpf_cnpj:o.method==="ted"?o.holder_cpf_cnpj:void 0},{preserveState:!0,onSuccess:()=>{K.success("Solicitação de saque enviada com sucesso!")},onError:()=>{K.error("Erro ao enviar solicitação de saque. Verifique os campos e tente novamente.")},onFinish:()=>{n(!1),u(s=>({...s,amount:"",method:"pix",pix_key:"",bank_name:"",bank_code:"",agency_number:"",account_number:"",holder_name:"",holder_cpf_cnpj:""}))}})};return t.jsx(we,{open:e,onOpenChange:n,children:t.jsx(ye,{onOpenAutoFocus:i=>{i.preventDefault(),a.current?.focus()},children:t.jsxs("form",{onSubmit:p,children:[t.jsxs(je,{children:[t.jsx(Ie,{children:"Solicitar saque"}),t.jsxs(Ne,{children:["Plano: ",t.jsx("strong",{children:r?.plan_name??"—"}),t.jsx("br",{}),"Saldo disponível: ",t.jsx("strong",{children:ut(r?.available??0)})]})]}),t.jsxs("div",{className:"mt-2 grid gap-3",children:[t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-amount",children:"Valor"}),t.jsx(I,{id:"wd-amount",placeholder:"0,00",value:o.amount,onChange:i=>u(s=>({...s,amount:i.target.value}))})]}),t.jsxs("div",{children:[t.jsx(R,{className:"mb-2 block",children:"Forma de recebimento"}),t.jsxs(pe,{value:o.method,onValueChange:i=>u(s=>({...s,method:i})),className:"flex gap-6",children:[t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(O,{id:"wd-m-pix",value:"pix"}),t.jsx(R,{htmlFor:"wd-m-pix",children:"PIX"})]}),t.jsxs("div",{className:"flex items-center space-x-2",children:[t.jsx(O,{id:"wd-m-ted",value:"ted"}),t.jsx(R,{htmlFor:"wd-m-ted",children:"TED"})]})]})]}),o.method==="pix"&&t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-pix",children:"Chave PIX"}),t.jsx(I,{id:"wd-pix",placeholder:"Informe sua chave (CPF, e-mail, aleatória...)",value:o.pix_key,onChange:i=>u(s=>({...s,pix_key:i.target.value}))})]}),o.method==="ted"&&t.jsxs("div",{className:"grid gap-3 sm:grid-cols-2",children:[t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-bank",children:"Banco"}),t.jsx(I,{id:"wd-bank",value:o.bank_name,onChange:i=>u(s=>({...s,bank_name:i.target.value}))})]}),t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-bankcode",children:"Código do banco"}),t.jsx(I,{id:"wd-bankcode",value:o.bank_code,onChange:i=>u(s=>({...s,bank_code:i.target.value}))})]}),t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-ag",children:"Agência"}),t.jsx(I,{id:"wd-ag",value:o.agency_number,onChange:i=>u(s=>({...s,agency_number:i.target.value}))})]}),t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-acc",children:"Conta"}),t.jsx(I,{id:"wd-acc",value:o.account_number,onChange:i=>u(s=>({...s,account_number:i.target.value}))})]}),t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-holder",children:"Titular"}),t.jsx(I,{id:"wd-holder",value:o.holder_name,onChange:i=>u(s=>({...s,holder_name:i.target.value}))})]}),t.jsxs("div",{children:[t.jsx(R,{htmlFor:"wd-doc",children:"CPF/CNPJ do titular"}),t.jsx(I,{id:"wd-doc",value:o.holder_cpf_cnpj,onChange:i=>u(s=>({...s,holder_cpf_cnpj:i.target.value}))})]})]})]}),t.jsxs(Ce,{className:"mt-4",children:[t.jsx(Ee,{ref:a,type:"button",children:"Cancelar"}),t.jsx(Ae,{type:"submit",children:"Enviar solicitação"})]})]})})})}export{Nt as default};
