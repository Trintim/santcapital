import{u as f,j as e,H as D,L as F,t as l,r as x,a as A}from"./app-CWQYjesW.js";import{A as T,a as S,b as E,c as L,d as R,e as O,f as B,g as z}from"./alert-dialog-DhUswqu4.js";import{B as c}from"./button-Dif-jUvB.js";import{C as g,a as y,b as k,c as C}from"./card-C5BbfPUs.js";import{C as p}from"./checkbox-DxVLbUY8.js";import{I as o}from"./input-oxdypoZS.js";import{L as d}from"./label-DTM-FZR3.js";import{T as H}from"./textarea-DQH_hWcL.js";import{A as P,T as I,a as $,b as q}from"./app-layout-CaRbv66n.js";import{T as G}from"./trash-2-DJEg84CC.js";/* empty css            */import"./index-DensfDaT.js";import"./createLucideIcon-DYlXr946.js";import"./index-BMonI4iZ.js";import"./index-HsrAfS9P.js";import"./index-BQ3Tdzwx.js";import"./utils-BkIxhzDH.js";import"./index-Dc_FVRD7.js";import"./index-xVn67iIP.js";import"./index-CykbKIKJ.js";import"./check-BkTEbtPm.js";import"./index-p0rgwcIB.js";import"./dropdown-menu-B2Cjc48K.js";function xe({plan:r}){const{data:s,setData:i,put:m,processing:_,errors:t}=f({name:r.data.name??"",description:r.data.description??"",lockup_days:r.data.lockup_days??0,minimum_deposit_amount:r.data.minimum_deposit_amount??0,contract_term_months:r.data.contract_term_months,expected_return_min_decimal:r.data.expected_return_min_decimal??"",expected_return_max_decimal:r.data.expected_return_max_decimal??"",extra_bonus_percent_on_capital_decimal:r.data.extra_bonus_percent_on_capital_decimal??"",withdrawal_only_at_maturity:!!r.data.withdrawal_only_at_maturity,guaranteed_min_multiplier_after_24m:r.data.guaranteed_min_multiplier_after_24m??"",is_active:!!r.data.is_active});function u(a){a.preventDefault(),m(route("admin.plans.update",{plan:r.data.id}),{onSuccess:()=>{l.success("Plano atualizado com sucesso!")},onError:()=>{l.error("Erro ao atualizar o plano.")}})}return e.jsx(P,{children:e.jsxs("div",{className:"space-y-6 p-6",children:[e.jsx(D,{title:`Editar: ${r.data.name}`}),e.jsxs(g,{className:"mx-auto max-w-4xl",children:[e.jsx(y,{children:e.jsx(k,{className:"text-2xl",children:"Editar plano"})}),e.jsx(C,{children:e.jsxs("form",{onSubmit:u,className:"grid gap-6 md:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"name",children:"Nome"}),e.jsx(o,{id:"name",value:s.name,onChange:a=>i("name",a.target.value)}),t.name&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.name})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"lockup_days",children:"Carência padrão (dias)"}),e.jsx(o,{id:"lockup_days",type:"number",value:s.lockup_days,onChange:a=>i("lockup_days",Number(a.target.value))}),t.lockup_days&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.lockup_days})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"minimum_deposit_amount",children:"Aporte mínimo (R$)"}),e.jsx(o,{id:"minimum_deposit_amount",type:"number",step:"0.01",value:s.minimum_deposit_amount,onChange:a=>i("minimum_deposit_amount",a.target.value)}),t.minimum_deposit_amount&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.minimum_deposit_amount})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"contract_term_months",children:"Prazo (meses)"}),e.jsx(o,{id:"contract_term_months",type:"number",value:s.contract_term_months??"",onChange:a=>i("contract_term_months",a.target.value?Number(a.target.value):null)}),t.contract_term_months&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.contract_term_months})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx(d,{htmlFor:"description",children:"Descrição"}),e.jsx(H,{id:"description",rows:4,value:s.description,onChange:a=>i("description",a.target.value)}),t.description&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.description})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"expected_return_min_decimal",children:"Rendimento esperado (mín., decimal)"}),e.jsx(o,{id:"expected_return_min_decimal",value:s.expected_return_min_decimal,onChange:a=>i("expected_return_min_decimal",a.target.value)}),t.expected_return_min_decimal&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.expected_return_min_decimal})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"expected_return_max_decimal",children:"Rendimento esperado (máx., decimal)"}),e.jsx(o,{id:"expected_return_max_decimal",value:s.expected_return_max_decimal,onChange:a=>i("expected_return_max_decimal",a.target.value)}),t.expected_return_max_decimal&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.expected_return_max_decimal})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"extra_bonus_percent_on_capital_decimal",children:"Bônus sobre capital (decimal)"}),e.jsx(o,{id:"extra_bonus_percent_on_capital_decimal",value:s.extra_bonus_percent_on_capital_decimal,onChange:a=>i("extra_bonus_percent_on_capital_decimal",a.target.value)}),t.extra_bonus_percent_on_capital_decimal&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.extra_bonus_percent_on_capital_decimal})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"withdrawal_only_at_maturity",checked:s.withdrawal_only_at_maturity,onCheckedChange:a=>i("withdrawal_only_at_maturity",!!a)}),e.jsx(d,{htmlFor:"withdrawal_only_at_maturity",children:"Saque somente no vencimento"})]}),e.jsxs("div",{children:[e.jsx(d,{htmlFor:"guaranteed_min_multiplier_after_24m",children:"Garantia mínima (após 24m)"}),e.jsx(o,{id:"guaranteed_min_multiplier_after_24m",value:s.guaranteed_min_multiplier_after_24m,onChange:a=>i("guaranteed_min_multiplier_after_24m",a.target.value)}),t.guaranteed_min_multiplier_after_24m&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.guaranteed_min_multiplier_after_24m})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"is_active",checked:s.is_active,onCheckedChange:a=>i("is_active",!!a)}),e.jsx(d,{htmlFor:"is_active",children:"Plano ativo"})]}),e.jsxs("div",{className:"flex gap-2 md:col-span-2",children:[e.jsx(F,{href:route("admin.plans.index"),children:e.jsx(c,{variant:"outline",children:"Voltar"})}),e.jsx(c,{disabled:_,children:"Salvar alterações"})]})]})})]}),e.jsx(V,{plan:r})]})})}function V({plan:r}){const{data:s,setData:i,post:m,processing:_,errors:t}=f({lockup_days:"",is_default:!1}),[u,a]=x.useState(!1),[h,j]=x.useState(null),v=x.useRef(null),N=n=>{n.preventDefault(),m(route("admin.plans.lockups.store",{plan:r.data.id}),{preserveScroll:!0,onSuccess:()=>{l.success("Opção de carência adicionada com sucesso!")},onError:()=>{l.error("Erro ao adicionar a opção de carência.")}})};function b(n){j(n),a(!0)}function w(){h&&A.delete(route("admin.plans.lockups.destroy",{plan:r.data.id,option:h.id}),{preserveScroll:!0,onSuccess:()=>l.success("Opção removida."),onError:()=>l.error("Falha ao remover opção."),onFinish:()=>{a(!1),j(null)}})}return e.jsxs(g,{className:"mx-auto mt-6 max-w-4xl",children:[e.jsx(y,{children:e.jsx(k,{children:"Opções de carência"})}),e.jsxs(C,{className:"space-y-3",children:[e.jsx("ul",{className:"divide-y rounded border",children:r.data.lockup_options?.length>0?r.data.lockup_options.map(n=>e.jsxs("li",{className:"flex items-center justify-between p-3",children:[e.jsxs("div",{children:[n.lockup_days," dias"," ",n.is_default&&e.jsx("span",{className:"ml-2 rounded bg-muted px-2 py-0.5 text-xs",children:"padrão"})||""]}),e.jsxs(I,{children:[e.jsx($,{asChild:!0,children:e.jsx(c,{variant:"destructive",size:"icon",onClick:()=>b(n),children:e.jsx(G,{className:"h-4 w-4"})})}),e.jsx(q,{children:"Remover opção"})]})]},n.id)):e.jsx("li",{className:"p-3 text-sm text-muted-foreground",children:"Sem opções adicionais."})}),e.jsxs("form",{onSubmit:N,className:"flex flex-col gap-4 md:flex-row md:items-end md:gap-8",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{children:[e.jsx(d,{htmlFor:"lockup_days_new",children:"Nova carência (dias)"}),e.jsx(o,{id:"lockup_days_new",type:"number",value:s.lockup_days,onChange:n=>i("lockup_days",n.target.value)}),t.lockup_days&&e.jsx("div",{className:"mt-1 text-sm text-red-600",children:t.lockup_days})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(p,{id:"is_default_new",checked:s.is_default,onCheckedChange:n=>i("is_default",!!n)}),e.jsx(d,{htmlFor:"is_default_new",children:"Definir como padrão"})]})]}),e.jsx(c,{disabled:_,type:"submit",children:"Adicionar"})]})]}),e.jsx(T,{open:u,onOpenChange:a,children:e.jsxs(S,{onOpenAutoFocus:n=>{n.preventDefault(),v.current?.focus()},children:[e.jsxs(E,{children:[e.jsx(L,{children:"Remover opção de carência?"}),e.jsx(R,{children:"Esta ação não poderá ser desfeita. A opção será removida do plano."})]}),e.jsxs(O,{children:[e.jsx(B,{ref:v,children:"Cancelar"}),e.jsx(z,{className:"bg-red-600 hover:bg-red-700",onClick:w,children:"Remover"})]})]})})]})}export{xe as default};
